#!/bin/bash
# This is a factors challenge

# Function to check if a number is a perfect square
is_perfect_square() {
    local root=$(echo "sqrt($1)" | bc)
    [[ $((root*root)) -eq $1 ]]
}

# Function to find the factors of a number and return the largest two
find_factors() {
    local n=$1
    local i=2
    while ((i*i <= n)); do
        if ((n % i == 0)); then
            if is_perfect_square "$((n/i))"; then
                echo "$i,$((n/i))"
                return
            fi
        fi
        ((i++))
    done
    echo "1,$n"
}

if [ $# -ne 1 ]; then
    echo "Usage: factors <file>"
    exit 1
fi

while read -r number; do
    factors=$(find_factors "$number")
    echo "$number=${factors/,/*}"
done < "$1"
